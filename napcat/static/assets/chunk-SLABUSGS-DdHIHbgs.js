import{m as k,bQ as N,bi as C,O as A,bT as Q,ce as x,bM as _,ck as q,j as g}from"./index-CmYOQK5J.js";import{r as o}from"./react-router-dom-OnDrQFKg.js";function K(t){const e=o.useRef(null);return o.useMemo(()=>({get current(){return e.current},set current(a){e.current=a,typeof t=="function"?t(a):t&&(t.current=a)}}),[t])}var Y=k({base:"flex flex-col gap-2 items-start"});function re(t){let{description:e,errorMessage:a,isInvalid:r,validationState:n}=t,{labelProps:i,fieldProps:d}=N(t),s=C([!!e,!!a,r,n]),l=C([!!e,!!a,r,n]);return d=A(d,{"aria-describedby":[s,l,t["aria-describedby"]].filter(Boolean).join(" ")||void 0}),{labelProps:i,fieldProps:d,descriptionProps:{id:s},errorMessageProps:{id:l}}}function le(t,e,a){let{validationBehavior:r,focus:n}=t;Q(()=>{if(r==="native"&&(a!=null&&a.current)){let l=e.realtimeValidation.isInvalid?e.realtimeValidation.validationErrors.join(" ")||"Invalid value.":"";a.current.setCustomValidity(l),a.current.hasAttribute("title")||(a.current.title=""),e.realtimeValidation.isInvalid||e.updateValidation(G(a.current))}});let i=x(()=>{e.resetValidation()}),d=x(l=>{var u;e.displayValidation.isInvalid||e.commitValidation();let v=a==null||(u=a.current)===null||u===void 0?void 0:u.form;if(!l.defaultPrevented&&a&&v&&H(v)===a.current){var f;n?n():(f=a.current)===null||f===void 0||f.focus(),_("keyboard")}l.preventDefault()}),s=x(()=>{e.commitValidation()});o.useEffect(()=>{let l=a==null?void 0:a.current;if(!l)return;let u=l.form;return l.addEventListener("invalid",d),l.addEventListener("change",s),u==null||u.addEventListener("reset",i),()=>{l.removeEventListener("invalid",d),l.removeEventListener("change",s),u==null||u.removeEventListener("reset",i)}},[a,d,s,i,r])}function z(t){let e=t.validity;return{badInput:e.badInput,customError:e.customError,patternMismatch:e.patternMismatch,rangeOverflow:e.rangeOverflow,rangeUnderflow:e.rangeUnderflow,stepMismatch:e.stepMismatch,tooLong:e.tooLong,tooShort:e.tooShort,typeMismatch:e.typeMismatch,valueMissing:e.valueMissing,valid:e.valid}}function G(t){return{isInvalid:!t.validity.valid,validationDetails:z(t),validationErrors:t.validationMessage?[t.validationMessage]:[]}}function H(t){for(let e=0;e<t.elements.length;e++){let a=t.elements[e];if(!a.validity.valid)return a}return null}const B={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1,valid:!0},w={...B,customError:!0,valid:!1},m={isInvalid:!1,validationDetails:B,validationErrors:[]},F=o.createContext({}),L="__formValidationState"+Date.now();function ne(t){if(t[L]){let{realtimeValidation:e,displayValidation:a,updateValidation:r,resetValidation:n,commitValidation:i}=t[L];return{realtimeValidation:e,displayValidation:a,updateValidation:r,resetValidation:n,commitValidation:i}}return J(t)}function J(t){let{isInvalid:e,validationState:a,name:r,value:n,builtinValidation:i,validate:d,validationBehavior:s="aria"}=t;a&&(e||(e=a==="invalid"));let l=e!==void 0?{isInvalid:e,validationErrors:[],validationDetails:w}:null,u=o.useMemo(()=>{if(!d||n==null)return null;let c=W(d,n);return P(c)},[d,n]);i!=null&&i.validationDetails.valid&&(i=void 0);let v=o.useContext(F),f=o.useMemo(()=>r?Array.isArray(r)?r.flatMap(c=>M(v[c])):M(v[r]):[],[v,r]),[O,T]=o.useState(v),[I,b]=o.useState(!1);v!==O&&(T(v),b(!1));let y=o.useMemo(()=>P(I?[]:f),[I,f]),S=o.useRef(m),[V,p]=o.useState(m),$=o.useRef(m),R=()=>{if(!U)return;E(!1);let c=u||i||S.current;h(c,$.current)||($.current=c,p(c))},[U,E]=o.useState(!1);return o.useEffect(R),{realtimeValidation:l||y||u||i||m,displayValidation:s==="native"?l||y||V:l||y||u||i||V,updateValidation(c){s==="aria"&&!h(V,c)?p(c):S.current=c},resetValidation(){let c=m;h(c,$.current)||($.current=c,p(c)),s==="native"&&E(!1),b(!0)},commitValidation(){s==="native"&&E(!0),b(!0)}}}function M(t){return t?Array.isArray(t)?t:[t]:[]}function W(t,e){if(typeof t=="function"){let a=t(e);if(a&&typeof a!="boolean")return M(a)}return[]}function P(t){return t.length?{isInvalid:!0,validationErrors:t,validationDetails:w}:null}function h(t,e){return t===e?!0:!!t&&!!e&&t.isInvalid===e.isInvalid&&t.validationErrors.length===e.validationErrors.length&&t.validationErrors.every((a,r)=>a===e.validationErrors[r])&&Object.entries(t.validationDetails).every(([a,r])=>e.validationDetails[a]===r)}var j=Symbol("default");function X(t,e){let a=o.useContext(t);if(e===null)return null;if(a&&typeof a=="object"&&"slots"in a&&a.slots){let r=new Intl.ListFormat().format(Object.keys(a.slots).map(i=>`"${i}"`));if(!e&&!a.slots[j])throw new Error(`A slot prop is required. Valid slot names are ${r}.`);let n=e||j;if(!a.slots[n])throw new Error(`Invalid slot "${e}". Valid slot names are ${r}.`);return a.slots[n]}return a}function Z(t,e,a){let r=X(a,t.slot)||{},{ref:n,...i}=r,d=K(o.useMemo(()=>q(e,n),[e,n])),s=A(i,t);return"style"in i&&i.style&&"style"in t&&t.style&&(typeof i.style=="function"||typeof t.style=="function"?s.style=l=>{let u=typeof i.style=="function"?i.style(l):i.style,v={...l.defaultStyle,...u},f=typeof t.style=="function"?t.style({...l,defaultStyle:v}):t.style;return{...v,...f}}:s.style={...i.style,...t.style}),[s,d]}var D=o.createContext(null),oe=o.forwardRef(function(e,a){[e,a]=Z(e,a,D);let{validationErrors:r,validationBehavior:n="native",children:i,className:d,...s}=e;const l=o.useMemo(()=>Y({className:d}),[d]);return g.jsx("form",{noValidate:n!=="native",...s,ref:a,className:l,children:g.jsx(D.Provider,{value:{...e,validationBehavior:n},children:g.jsx(F.Provider,{value:r??{},children:i})})})});export{ne as $,oe as F,le as a,L as b,m as c,D as d,re as e,X as u};
